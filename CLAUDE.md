# CLAUDE.md

> AI Orchestrator Framework - Claude Code 중심 워크플로우

이 프레임워크는 AI가 개발의 전 과정을 수행하고, 사용자가 오케스트레이터로서 감독하는 협업 체계입니다.

---

## Quick Start

```bash
# 새 프로젝트에 이 프레임워크를 적용하려면:
# 1. 이 저장소를 복사
# 2. CLAUDE.md와 docs/ 폴더를 프로젝트에 추가
# 3. 프로젝트에 맞게 커스터마이징
```

---

## Core Principles (핵심 원칙)

| # | 원칙 | 설명 |
|---|------|------|
| 1 | **명확한 규칙** | 모호한 명령 금지, 모든 규칙을 문서화 |
| 2 | **자동화된 검증** | AI 결과물은 자동 테스트로 검증 |
| 3 | **승인 기반 실행** | AI 계획 → 사용자 승인 → 실행 |
| 4 | **맥락 중심** | AI가 전체 시스템을 이해할 수 있는 구조 |

---

## Agents (에이전트)

AI 작업은 3단계 에이전트 체계로 수행됩니다.

| Agent | 역할 | 트리거 | 설명 |
|-------|------|--------|------|
| **Planner** | 계획 수립 | `/plan`, 새 기능 요청 | 요청 분석, 영향 범위 파악, 단계별 계획 작성 |
| **Coder** | 코드 작성 | 계획 승인 후 자동 | 계획에 따른 구현, 테스트 코드 포함 |
| **Reviewer** | 코드 리뷰 | 구현 완료 후 자동 | 품질 검증, 보안/성능 검사, 개선 제안 |

상세 정의: [agents/](./agents/)

---

## Skills (스킬)

재사용 가능한 작업 절차입니다.

| Skill | 용도 | 명령어 |
|-------|------|--------|
| **interview** | 기획 인터뷰 및 요구사항 수집 | `/interview` |
| **commit** | Git 커밋 메시지 작성 및 커밋 | `/commit` |
| **review-pr** | Pull Request 리뷰 | `/review-pr` |
| **test** | 테스트 실행 및 분석 | `/test` |
| **deploy** | 배포 프로세스 | `/deploy` |
| **docs** | 문서 자동 생성 | `/docs` |

상세 정의: [skills/](./skills/)

---

## Workflow (워크플로우)

### 기본 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                       사용자 요청                                │
└───────────────────────────┬─────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│              Planner Agent - 계획 수립                           │
│  • 요청 분석                                                     │
│  • 영향 범위 파악                                                │
│  • 단계별 계획 작성                                              │
└───────────────────────────┬─────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│              [사용자 승인 대기]                                   │
│              승인(Y) / 수정 요청 / 거부(N)                        │
└───────────────────────────┬─────────────────────────────────────┘
                            ▼ (승인)
┌─────────────────────────────────────────────────────────────────┐
│              Coder Agent - 구현                                  │
│  • 계획에 따른 코드 작성                                         │
│  • 테스트 코드 포함                                              │
└───────────────────────────┬─────────────────────────────────────┘
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│              자동 검증                                           │
│  • 타입 체크                                                     │
│  • 린트 검사                                                     │
│  • 테스트 실행                                                   │
└──────────┬────────────────────────────────────┬─────────────────┘
           ▼ (실패)                              ▼ (성공)
┌────────────────────────┐          ┌─────────────────────────────┐
│   Self-healing 루프    │          │   Reviewer Agent - 리뷰     │
│  • 에러 분석           │          │  • 코드 품질 검증            │
│  • 자동 수정 (최대 3회) │          │  • 보안/성능 검사            │
└──────────┬─────────────┘          └─────────────┬───────────────┘
           ▼ (3회 실패)                           ▼
┌────────────────────────┐          ┌─────────────────────────────┐
│   사용자 개입 요청     │          │   커밋/PR 생성               │
└────────────────────────┘          └─────────────────────────────┘
```

### 승인 레벨

| 레벨 | 대상 | 승인 방식 |
|------|------|----------|
| L1 | 일반 코드 변경 | 자동 (테스트 통과 시) |
| L2 | 아키텍처 변경 | 사용자 명시적 승인 |
| L3 | 보안 관련 변경 | 사용자 + 리뷰어 승인 |
| L4 | 프로덕션 배포 | 사용자 + 관리자 승인 |

---

## Constraints (제약 조건)

### 금지 사항
- 테스트 없는 코드 머지 금지
- 직접 main 브랜치 푸시 금지
- 보안 관련 파일(.env, credentials) 커밋 금지
- 승인 없는 아키텍처 변경 금지

### 필수 사항
- 모든 기능에 테스트 코드 포함
- 변경사항에 대한 문서 업데이트
- PR 전 린트/타입체크 통과
- 의미 있는 커밋 메시지 작성

---

## Development Commands

```bash
# 의존성 설치
npm install

# 테스트 실행
npm test

# 테스트 (커버리지 포함)
npm run test:coverage

# 린트 검사
npm run lint

# 린트 자동 수정
npm run lint:fix

# 타입 체크
npm run type-check

# 빌드
npm run build

# 개발 서버
npm run dev
```

---

## Verification Checklist

### 커밋 전 확인
- [ ] 타입 체크 통과
- [ ] 린트 통과
- [ ] 테스트 통과
- [ ] 변경사항 문서화

### PR 전 확인
- [ ] 커버리지 기준 충족 (80% 이상)
- [ ] Reviewer Agent 리뷰 완료
- [ ] 보안 취약점 없음
- [ ] 성능 이슈 없음

---

## Directory Structure

```
├── CLAUDE.md                 # 이 파일 (진입점)
├── README.md                 # 프로젝트 소개
├── docs/
│   ├── ai-orchestrator.md    # 4대 역할 정의
│   ├── architecture.md       # 시스템 구조
│   ├── conventions.md        # 코딩 규칙
│   ├── workflow.md           # 워크플로우 가이드
│   └── templates/            # 문서 템플릿
├── agents/                   # Agent 정의
├── skills/                   # Skill 정의
├── workflows/                # 워크플로우 정의
├── verification/             # 검증 스크립트
└── .github/workflows/        # CI/CD 파이프라인
```

---

## Related Documents

- [AI Orchestrator Guide](./docs/ai-orchestrator.md) - 4대 역할 상세
- [Architecture](./docs/architecture.md) - 시스템 구조
- [Conventions](./docs/conventions.md) - 코딩 규칙
- [Workflow Guide](./docs/workflow.md) - 작업 흐름 상세

---

## AI 작업 시 참고사항

1. **항상 이 파일을 먼저 읽으세요** - 프로젝트의 규칙과 구조를 파악합니다.
2. **계획을 먼저 세우세요** - 코드 작성 전 계획을 수립하고 승인을 받습니다.
3. **테스트를 작성하세요** - 모든 기능에 테스트 코드를 포함합니다.
4. **문서를 업데이트하세요** - 변경사항은 관련 문서에 반영합니다.
5. **의미 있는 커밋을 하세요** - 작업 단위로 명확한 커밋 메시지를 작성합니다.
